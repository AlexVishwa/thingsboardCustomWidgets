{
  "alias": "update_multiple_attributes",
  "name": "Update Multiple Attributes",
  "descriptor": {
    "type": "latest",
    "sizeX": 7.5,
    "sizeY": 8,
    "resources": [],
    "templateHtml": "<tb-multiple-input-widget \n    [ctx]=\"ctx\">\n</tb-multiple-input-widget>",
    "templateCss": ".tb-toast {\n    min-width: 0;\n    font-size: 14px !important;\n}",
    "controllerScript": "self.onInit = function() {\r\n    \r\n    \r\n    $scope = self.ctx.$scope;\r\n    console.log($scope.ctx.data[1].dataKey.settings );\r\n}\r\n\r\nself.onDataUpdated = function() {\r\n     self.ctx.$scope.multipleInputWidget.onDataUpdated();\r\n}\r\n\r\n// self.getDataKeySettingsSchema = function(){\r\n//     return 0;\r\n// }\r\n",
    "settingsSchema": "{\n    \"schema\": {\n        \"type\": \"object\",\n        \"title\": \"MultipleInput\",\n        \"properties\": {\n            \"widgetTitle\": {\n                \"title\": \"Widget title\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"showActionButtons\": {\n                \"title\": \"Show action buttons\",\n                \"type\": \"boolean\",\n                \"default\": true\n            },\n            \"updateAllValues\": {\n                \"title\": \"Update all values, not only modified\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"saveButtonLabel\": {\n                \"title\": \"'SAVE' button label\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"resetButtonLabel\": {\n                \"title\": \"'UNDO' button label\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"showResultMessage\": {\n                \"title\": \"Show result message\",\n                \"type\": \"boolean\",\n                \"default\": true\n            },\n            \"showGroupTitle\": {\n                \"title\": \"Show title for group of fields, related to different entities\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"groupTitle\": {\n                \"title\": \"Group title\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"fieldsAlignment\": {\n                \"title\": \"Fields alignment\",\n                \"type\": \"string\",\n                \"default\": \"row\"\n            },\n            \"fieldsInRow\": {\n                \"title\": \"Number of fields in the row\",\n                \"type\": \"number\",\n                \"default\": \"2\"\n            },\n            \"datakeyType\": {\n                \"title\": \"Datakey Type\",\n                \"type\": \"string\",\n                \"default\": \"List\"\n            },\n            \"list\": {\n                \"title\": \"List Elements\",\n                \"type\": \"array\",\n                \"items\": {\n                    \"type\": \"string\"\n                }\n            },\n            \"dataString\": {\n                \"title\": \"Data String\",\n                \"type\": \"string\",\n                \"default\": \"Field\"\n            }\n        },\n        \"required\": []\n    },\n    \"form\": [\n        \"widgetTitle\",\n        \"showActionButtons\",\n        {\n            \"key\": \"updateAllValues\",\n            \"condition\": \"model.showActionButtons === true\"\n        },\n        {\n            \"key\": \"saveButtonLabel\",\n            \"condition\": \"model.showActionButtons === true\"\n        },\n        {\n            \"key\": \"resetButtonLabel\",\n            \"condition\": \"model.showActionButtons === true\"\n        },\n        \"showResultMessage\",\n        \"showGroupTitle\",\n        \"groupTitle\",\n        {\n            \"key\": \"fieldsAlignment\",\n            \"type\": \"rc-select\",\n            \"multiple\": false,\n            \"items\": [{\n                    \"value\": \"row\",\n                    \"label\": \"Row (default)\"\n                },\n                {\n                    \"value\": \"column\",\n                    \"label\": \"Column\"\n                }\n            ]\n        },\n        {\n            \"key\": \"fieldsInRow\",\n            \"condition\": \"model.fieldsAlignment === 'row'\"\n        },\n        {\n            \"key\": \"datakeyType\",\n            \"type\": \"rc-select\",\n            \"multiple\": false,\n            \"items\": [{\n                    \"value\": \"List\",\n                    \"label\": \"List\"\n                },\n                {\n                    \"value\": \"str\",\n                    \"label\": \"String\"\n                }\n            ]\n        },\n        {\n            \"key\": \"list\",\n            \"condition\": \"model.datakeyType === 'List'\"\n        },\n        {\n            \"key\": \"dataString\",\n            \"condition\": \"model.datakeyType === 'str'\"\n        }\n\n\n    ]\n}",
    "dataKeySettingsSchema": "{\n    \"schema\": {\n        \"type\": \"object\",\n        \"title\": \"DataKeySettings\",\n        \"properties\": {\n            \"dataKeyType\": {\n                \"title\": \"Datakey type\",\n                \"type\": \"string\",\n                \"default\": \"server\"\n            },\n            \"dataKeyValueType\": {\n                \"title\": \"Datakey value type\",\n                \"type\": \"string\",\n                \"default\": \"string\"\n            },\n            \"step\": {\n                \"title\": \"Step interval between values\",\n                \"type\": \"number\",\n                \"default\": \"1\"\n            },\n            \"minValue\": {\n                \"title\": \"Minimum value\",\n                \"type\": \"number\"\n            },\n            \"maxValue\": {\n                \"title\": \"Maximum value\",\n                \"type\": \"number\"\n            },\n            \"required\": {\n                \"title\": \"Value is required\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"requiredErrorMessage\": {\n                \"title\": \"'Required' error message\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"minValueErrorMessage\": {\n                \"title\": \"'Min Value' error message\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"maxValueErrorMessage\": {\n                \"title\": \"'Max Value' error message\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"invalidDateErrorMessage\": {\n                \"title\": \"'Invalid Date' error message\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"isEditable\": {\n                \"title\": \"Ability to edit attribute\",\n                \"type\": \"string\",\n                \"default\": \"editable\"\n            },\n            \"disabledOnDataKey\": {\n                \"title\": \"Disable on false value of another datakey (specify datakey name)\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"dataKeyHidden\": {\n                \"title\": \"Hide input field\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"icon\": {\n                \"title\": \"Icon to show before input cell\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"list\": {\n                \"title\": \"List Elements\",\n                \"type\": \"array\",\n                \"items\": {\n                    \"type\": \"string\"\n                }\n            }\n\n        },\n        \"required\": []\n    },\n    \"form\": [{\n            \"key\": \"dataKeyType\",\n            \"type\": \"rc-select\",\n            \"multiple\": false,\n            \"items\": [{\n                    \"value\": \"server\",\n                    \"label\": \"Server attribute (default)\"\n                },\n                {\n                    \"value\": \"shared\",\n                    \"label\": \"Shared attribute\"\n                },\n                {\n                    \"value\": \"timeseries\",\n                    \"label\": \"Timeseries\"\n                }\n            ]\n        },\n        {\n            \"key\": \"dataKeyValueType\",\n            \"type\": \"rc-select\",\n            \"multiple\": false,\n            \"items\": [{\n                    \"value\": \"string\",\n                    \"label\": \"String\"\n                },\n                {\n                    \"value\": \"double\",\n                    \"label\": \"Double\"\n                },\n                {\n                    \"value\": \"integer\",\n                    \"label\": \"Integer\"\n                },\n                {\n                    \"value\": \"booleanCheckbox\",\n                    \"label\": \"Boolean (Checkbox)\"\n                },\n                {\n                    \"value\": \"booleanSwitch\",\n                    \"label\": \"Boolean (Switch)\"\n                },\n                {\n                    \"value\": \"dateTime\",\n                    \"label\": \"Date & Time\"\n                },\n                {\n                    \"value\": \"date\",\n                    \"label\": \"Date\"\n                },\n                {\n                    \"value\": \"time\",\n                    \"label\": \"Time\"\n                },\n                {\n                    \"value\": \"list\",\n                    \"label\": \"LIST\"\n                }\n            ]\n        },\n        {\n            \"key\": \"list\",\n            \"condition\": \"model.dataKeyValueType === 'list'\"\n        },\n        {\n            \"key\": \"step\",\n            \"condition\": \"model.dataKeyValueType === 'double' || model.dataKeyValueType === 'integer'\"\n        },\n        {\n            \"key\": \"minValue\",\n            \"condition\": \"model.dataKeyValueType === 'double' || model.dataKeyValueType === 'integer'\"\n        },\n        {\n            \"key\": \"maxValue\",\n            \"condition\": \"model.dataKeyValueType === 'double' || model.dataKeyValueType === 'integer'\"\n        },\n        \"required\",\n        {\n            \"key\": \"requiredErrorMessage\",\n            \"condition\": \"model.required === true\"\n        },\n        {\n            \"key\": \"invalidDateErrorMessage\",\n            \"condition\": \"model.dataKeyValueType === 'dateTime' || model.dataKeyValueType === 'date' || model.dataKeyValueType === 'time'\"\n        },\n        {\n            \"key\": \"minValueErrorMessage\",\n            \"condition\": \"model.dataKeyValueType === 'double' || model.dataKeyValueType === 'integer'\"\n        },\n        {\n            \"key\": \"maxValueErrorMessage\",\n            \"condition\": \"model.dataKeyValueType === 'double' || model.dataKeyValueType === 'integer'\"\n        },\n        {\n            \"key\": \"isEditable\",\n            \"type\": \"rc-select\",\n            \"multiple\": false,\n            \"items\": [{\n                    \"value\": \"editable\",\n                    \"label\": \"Editable (default)\"\n                },\n                {\n                    \"value\": \"disabled\",\n                    \"label\": \"Disabled\"\n                },\n                {\n                    \"value\": \"readonly\",\n                    \"label\": \"Read-only\"\n                }\n            ]\n        },\n        \"disabledOnDataKey\",\n        \"dataKeyHidden\",\n        {\n            \"key\": \"icon\",\n            \"type\": \"icon\"\n        }\n    ]\n}",
    "defaultConfig": "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"entityAliasId\":null,\"filterId\":null,\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Sin\",\"color\":\"#2196f3\",\"settings\":{\"dataKeyType\":\"server\",\"dataKeyValueType\":\"list\",\"step\":1,\"required\":false,\"requiredErrorMessage\":\"\",\"minValueErrorMessage\":\"\",\"maxValueErrorMessage\":\"\",\"invalidDateErrorMessage\":\"\",\"isEditable\":\"editable\",\"dataKeyHidden\":false,\"list\":[\"aa\"]},\"_hash\":0.43268423754322094,\"funcBody\":\"return Math.round(1000*Math.sin(time/5000));\",\"units\":null,\"decimals\":null,\"usePostProcessing\":null,\"postFuncBody\":null},{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Cos\",\"color\":\"#4caf50\",\"settings\":{\"dataKeyType\":\"server\",\"dataKeyValueType\":\"string\",\"step\":\"1\",\"required\":false,\"requiredErrorMessage\":\"\",\"minValueErrorMessage\":\"\",\"maxValueErrorMessage\":\"\",\"invalidDateErrorMessage\":\"\",\"isEditable\":\"editable\",\"disabledOnDataKey\":\"\",\"dataKeyHidden\":false,\"icon\":\"\",\"list\":[]},\"_hash\":0.5364852053094118,\"funcBody\":\"return Math.round(1000*Math.cos(time/5000));\"},{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Random\",\"color\":\"#f44336\",\"settings\":{\"dataKeyType\":\"server\",\"dataKeyValueType\":\"string\",\"step\":\"1\",\"required\":false,\"requiredErrorMessage\":\"\",\"minValueErrorMessage\":\"\",\"maxValueErrorMessage\":\"\",\"invalidDateErrorMessage\":\"\",\"isEditable\":\"editable\",\"disabledOnDataKey\":\"\",\"dataKeyHidden\":false,\"icon\":\"\",\"list\":[]},\"_hash\":0.4869826291610049,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\"},{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Cos 2\",\"color\":\"#ffc107\",\"settings\":{\"dataKeyType\":\"server\",\"dataKeyValueType\":\"string\",\"step\":\"1\",\"required\":false,\"requiredErrorMessage\":\"\",\"minValueErrorMessage\":\"\",\"maxValueErrorMessage\":\"\",\"invalidDateErrorMessage\":\"\",\"isEditable\":\"editable\",\"disabledOnDataKey\":\"\",\"dataKeyHidden\":false,\"icon\":\"\",\"list\":[]},\"_hash\":0.7253016588817371,\"funcBody\":\"return Math.round(1000*Math.cos(time/5000));\"},{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Sin 2\",\"color\":\"#607d8b\",\"settings\":{\"dataKeyType\":\"server\",\"dataKeyValueType\":\"string\",\"step\":\"1\",\"required\":false,\"requiredErrorMessage\":\"\",\"minValueErrorMessage\":\"\",\"maxValueErrorMessage\":\"\",\"invalidDateErrorMessage\":\"\",\"isEditable\":\"editable\",\"disabledOnDataKey\":\"\",\"dataKeyHidden\":false,\"icon\":\"\",\"list\":[]},\"_hash\":0.48451897178659564,\"funcBody\":\"return Math.round(1000*Math.sin(time/5000));\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":true,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"8px\",\"settings\":{\"groupTitle\":\"${entityName}\",\"showActionButtons\":true,\"fieldsAlignment\":\"row\",\"fieldsInRow\":2,\"showResultMessage\":true,\"datakeyType\":\"List\"},\"title\":\"Update Multiple Attributes\",\"dropShadow\":true,\"enableFullscreen\":false,\"enableDataExport\":false,\"widgetStyle\":{},\"titleStyle\":{\"fontSize\":\"16px\",\"fontWeight\":400},\"useDashboardTimewindow\":true,\"showLegend\":false,\"actions\":{}}"
  }
}