{
  "alias": "alarm_button",
  "name": "Alarm button",
  "descriptor": {
    "type": "latest",
    "sizeX": 8,
    "sizeY": 5,
    "resources": [],
    "templateHtml": "<div class='card'>\n    <div class='description'>\n        <div>\n            <a class=\"mat-button mat-raised-button mat-primary\" (click)='sendRequest()'>\n                <span class=\"mat-button-wrapper\">Send Request</span>\n            </a>\n        </div>\n    </div>\n</div>",
    "templateCss": ".legend {\n    font-size: 13px;\n    line-height: 10px;\n}\n\n.legend table { \n    border-spacing: 0px;\n    border-collapse: separate;\n}\n\n.mouse-events .flot-overlay {\n    cursor: crosshair; \n}\n\n.card {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n    color: #fff;\n    text-align: center;\n}\n\n.card .title {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n    font-weight: bold;\n    font-size: 20px;\n    color: #fff;\n    padding-right: 20px;\n    padding-left: 10px;\n}\n\n.card .description {\n    height: 100%;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    padding-left: 0px;\n    color: #d2ddf8;\n}\n\n.card .description.text {\n    margin-bottom: -20px;\n    margin-top: -25px;\n    font-size: 12px;   \n}\n\n.card .mat-button {\n    text-transform: uppercase;\n    margin-left: 8px;\n    margin-right: 8px;\n}\n\n.card .mat-button:hover {\n    border-bottom: none;\n}\n\ndiv.social {\n\tmargin-left: 10px;\n}\n\n.social a {\n\tdisplay: inline-block;\n\tbackground-image: url(https://thingsboard.io/images/social_sprite.png);\n\tbackground-repeat: no-repeat;\n\tbackground-size: auto;\n\twidth: 50px;\n\theight: 50px;\n\tborder-radius: 5px;\n\tmargin-right: 10px;\n\tborder-bottom: 0;\n}\n\n.social a:hover {\n\t\tbackground-color: #fff;\n}\n\n.social\tspan {\n\t\tposition: absolute;\n\t\tdisplay: block;\n\t\theight: 0;\n\t\toverflow: hidden;\n}\n\na.twitter {\n\tbackground-position: 0 0;\n}\n\na.twitter:hover {\n\tbackground-position: 0 100%;\n}\n\na.youtube {\n\tbackground-position: -300px 0;\n}\n\na.youtube:hover {\n\tbackground-position: -300px 100%;\n}\n\na.facebook {\n\tbackground-position: -350px 0;\n}\n\na.facebook:hover {\n\tbackground-position: -350px 100%;\n}\n\n#download-json-button {\n    display: none;\n}\n\n@media (min-width: 961px) { \n    .card {\n        align-items: flex-start;\n        justify-content: flex-start;\n        flex-direction: row;\n    }\n    .card .title {\n        font-size: 16px;\n        width: 150px;\n    }\n    \n    .card .description {\n        padding-left: 15px;\n    }\n    \n    .card .description.text {\n        margin-bottom: 0px;\n        margin-top: 0px;\n        font-size: 12px;   \n        width: 150px;\n    }\n}\n\n@media (min-width: 1040px) { \n    .card .title {\n        width: 200px;\n    }\n    .card .description.text {\n         width: 200px;\n    }\n}\n\n@media (min-width: 1300px) { \n\n    #download-json-button {\n        display: block;\n    }\n}\n\n@media (min-width: 1610px) { \n    .card .title {\n        width: initial;\n        font-size: 32px;\n    }\n    .card .description.text{\n        width: initial;\n        font-size: 16px;\n    }    \n}",
    "controllerScript": "    self.onInit = function() {\n        $scope = self.ctx.$scope;\n        $scope.sendRequest = function sendRequest() {\n            var data2 = self.ctx.data;\n            console.log(data2);\n            var devtoken = self.ctx.data[0].datasource.entityName;\n            var devid = self.ctx.data[0].datasource.entityId;\n            var url =\"https://thingsboard.cloud/api/v1/Genx001/attributes\";// +\n                // devtoken +\n                // \"/attributes\";\n            var xhr = new XMLHttpRequest();\n            var opt_status = self.ctx.settings\n                .Operational_Status;\n            xhr.open(\"POST\", url);\n            xhr.setRequestHeader('X-Authorization','Bearer ' + localStorage.getItem(\"jwt_token\"));\n            xhr.setRequestHeader(\"Content-Type\",\"application/json;charset=UTF-8\");\n            xhr.setRequestHeader(\"Accept\",\"application/json\");\n            xhr.setRequestHeader(\"Access-Control-Allow-Origin\",\"*\");\n            var result;\n            xhr.onreadystatechange = function() {\n                if (xhr.readyState === 4) {\n                    console.log(xhr.status);\n                    console.log(xhr.responseText);\n                    result=JSON.parse(xhr.responseText);\n                }\n            };\n            //customerName,timestamp,status,deviceName,type:\"operational_alarm\"\n\n            //var msg ='{\"deviceName\":'+devtoken+',\"operationaStatus\":'+opt_status+',\"customerName\":'+result.data[0].userName+',\"timestamp\":'+result.data[0].createdTime+'}';\n            \n            //xhr.send(msg);\n        }\n    }",
    "settingsSchema": "{}",
    "dataKeySettingsSchema": "{}",
    "defaultConfig": "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"entityAliasId\":null,\"filterId\":null,\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"First\",\"color\":\"#2196f3\",\"settings\":{\"showLines\":true,\"fillLines\":true,\"showPoints\":false},\"_hash\":0.8587686344902596,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":true,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"8px\",\"settings\":{\"shadowSize\":4,\"fontColor\":\"#545454\",\"fontSize\":10,\"xaxis\":{\"showLabels\":true,\"color\":\"#545454\"},\"yaxis\":{\"showLabels\":true,\"color\":\"#545454\"},\"grid\":{\"color\":\"#545454\",\"tickColor\":\"#DDDDDD\",\"verticalLines\":true,\"horizontalLines\":true,\"outlineWidth\":1},\"stack\":false,\"tooltipIndividual\":false,\"timeForComparison\":\"previousInterval\",\"xaxisSecond\":{\"axisPosition\":\"top\",\"showLabels\":true}},\"title\":\"Alarm button\",\"dropShadow\":true,\"enableFullscreen\":true,\"titleStyle\":{\"fontSize\":\"16px\",\"fontWeight\":400},\"mobileHeight\":null,\"useDashboardTimewindow\":true}"
  },
  "image": null,
  "description": null
}